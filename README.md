# Spurv

Spurv is a language closely related to Khrono's [SPIR-V assembly syntax](https://github.com/KhronosGroup/SPIRV-Tools/blob/master/syntax.md), but with some changes aimed at making SPIR-V easier to write by hand.

A small comparison to Khrono's specification:
- Spurv has all the same operations, but with the 'Op'-part taken away, as well as converting all operation keywords from _PascalCase_ to _camel_case_. Thus, e.g. `OpTypePointer` becomes `type_pointer`, but ending capitals are kept, so that e.g. `OpGroupIAddNonUniformAMD` becomes `group_i_add_non_uniform_AMD`. 
- All enums have their original form (`Shader`, `Name` etc.)
- Free-form variable names as result id's are supported (all c-like variable names that are not keywords are permitted)
- Result id's from operations can either be declared as an operand, like it is treated in the physical binary format, or might be assigned with an 'equals' sign, as in Khronos' assembly specification

## Build

The build is only tested on Linux. The Makefile should do everything necessary. Dependencies:
- Python3
- Flex
- Yacc
- g++ (std C++11)

In addition, an example is provided, one that makes use of [HConLib](https://github.com/TheVaffel/HConLib)'s Wingine framework. Thus, this is required for the example ("test"). A small modification of the HCONLIB_ROOT path in the test's Makefile should make everything work when the dependencies are in place.

## TODO

- The language has a large amount of keywords (one for each operation and enum), and might thus be hard to write without triggering a name collision. A grammar file for common editors (primarily Emacs and Vim) could help to avoid this.
- Include support for implicitly defined types (void, float etc..)
- Make more boiler-plate code generated by default (if we know that a program is a GLSL shader, we might just specify memory model and import packages automatically)

## Etymology

Spurv means sparrow in Norwegian.

It might be related, idk